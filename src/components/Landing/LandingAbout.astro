---
import StatsSlideshow from "@/components/Common/StatsSlideshow";
import StatsGrid from "@/components/Common/StatsGrid";
import { icons } from "@/components/Common/StatsItem";

import Container from "@/components/Common/Container";
import { getEvents } from "@/content/events";
import { getVenues } from "@/content/venues";
import SimpleSection from "../Common/SimpleSection";
import Button from "../Common/Button";

// Use the filtered getters which already handle devOnly filtering
const events = await getEvents();
const venues = await getVenues();

// Calculate stats
const totalEvents = events.length;
const uniqueVenues = venues.length;

// Define stats with icon keys
const stats = [
  {
    title: "First Event",
    value: "2014",
    iconKey: icons.calendar,
    subTitle: "Started our Journey",
  },
  {
    title: "Total Events",
    value: totalEvents.toString(),
    iconKey: icons.calendarDays,
    subTitle: "Events and Counting",
  },
  {
    title: "Locations",
    value: uniqueVenues.toString() + "+",
    iconKey: icons.mapPin,
    subTitle: "Places We've Met",
  },
  {
    title: "Participants",
    value: "2000+",
    iconKey: icons.users,
    subTitle: "Community Members",
  },
];
---

<Container>
  <div class="grid gap-16 lg:grid-cols-2">
    <div class="flex items-center justify-center lg:order-2 lg:items-start">
      <div class="flex max-w-[40em] flex-col gap-12 py-6 text-center lg:text-left">
        <h2 class="text-4xl">About OKTech</h2>
        <p class="text-lg">
          A volunteer, non-profit group organizing monthly meetups in the Kansai region of Japan. We
          invite people from all walks of web-life and encourage members to present topics they
          enjoy. Join us for technical workshops, study sessions, and social gatherings in Osaka and
          Kyoto.
        </p>
        <p>
          <Button
            className="btn-lg"
            text="Learn More"
            href="/about"
            ariaLabel="Learn More About OKTech"
          />
        </p>
      </div>
    </div>
    <div class="flex items-center justify-center lg:order-1 lg:-my-20">
      <div class="mx-auto max-w-[50em]">
        <StatsGrid client:visible stats={stats} />
      </div>
    </div>
  </div>
</Container>
